(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{390:function(s,t,a){"use strict";a.r(t);var n=a(26),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"oracle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#oracle"}},[s._v("#")]),s._v(" Oracle")]),s._v(" "),a("h2",{attrs:{id:"trigger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#trigger"}},[s._v("#")]),s._v(" Trigger")]),s._v(" "),a("blockquote",[a("p",[s._v("å‚è€ƒï¼šhttps://blog.csdn.net/gdkyxy2013/article/details/118896816")])]),s._v(" "),a("h3",{attrs:{id:"æ¦‚è¿°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è¿°"}},[s._v("#")]),s._v(" æ¦‚è¿°")]),s._v(" "),a("h4",{attrs:{id:"è§¦å‘å™¨æ˜¯ä»€ä¹ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§¦å‘å™¨æ˜¯ä»€ä¹ˆ"}},[s._v("#")]),s._v(" è§¦å‘å™¨æ˜¯ä»€ä¹ˆï¼Ÿ")]),s._v(" "),a("p",[s._v("æ•°æ®åº“è§¦å‘å™¨æ˜¯ä¸€ä¸ªä¸è¡¨ç›¸å…³è”çš„ï¼Œå­˜å‚¨çš„PL/SQL è¯­å¥ã€‚æ¯å½“ä¸€ä¸ªç‰¹å®šçš„æ•°æ®æ“ä½œè¯­å¥ï¼ˆinsert update deleteï¼‰åœ¨æŒ‡å®šçš„è¡¨ä¸Šå‘å‡ºæ—¶ï¼ŒOracleè‡ªåŠ¨æ‰§è¡Œè§¦å‘å™¨ä¸­å®šä¹‰çš„è¯­å¥åºåˆ—ã€‚\nï¼ˆå½“è§¦å‘æ¡ä»¶æˆç«‹æ—¶ï¼Œå…¶è¯­å¥å°±ä¼šè‡ªåŠ¨æ‰§è¡Œï¼‰")]),s._v(" "),a("h4",{attrs:{id:"è§¦å‘å™¨æœ‰ä»€ä¹ˆç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§¦å‘å™¨æœ‰ä»€ä¹ˆç”¨"}},[s._v("#")]),s._v(" è§¦å‘å™¨æœ‰ä»€ä¹ˆç”¨ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¿æŠ¤æ•°æ®çš„å®‰å…¨ï¼Œç›‘è§†å¯¹æ•°æ®çš„å„ç§æ“ä½œï¼Œå¦‚\n'æ—¥å¿—è®°å½•': å¯¹é‡è¦è¡¨çš„ 'ä¿®æ”¹' è¿›è¡Œè®°å½•")]),s._v(" "),a("h4",{attrs:{id:"è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹çš„åŒºåˆ«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹çš„åŒºåˆ«"}},[s._v("#")]),s._v(" è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹çš„åŒºåˆ«ï¼Ÿ")]),s._v(" "),a("p",[s._v("ä¸»è¦åŒºåˆ«ï¼š'è°ƒç”¨è¿è¡Œæ–¹å¼ä¸åŒ'")]),s._v(" "),a("ol",[a("li",[s._v("å­˜å‚¨è¿‡ç¨‹: 'ç”¨æˆ·'ã€'åº”ç”¨ç¨‹åº'ã€'è§¦å‘å™¨' æ¥è°ƒç”¨")]),s._v(" "),a("li",[s._v("è§¦å‘å™¨:   'è‡ªåŠ¨æ‰§è¡Œ'ï¼ˆæ»¡è¶³ 'è§¦å‘æ¡ä»¶'ï¼‰ï¼Œä¸å…¶å®ƒæ— å…³")])]),s._v(" "),a("h3",{attrs:{id:"è§¦å‘å™¨è¯­æ³•åŠå…³é”®å­—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§¦å‘å™¨è¯­æ³•åŠå…³é”®å­—"}},[s._v("#")]),s._v(" è§¦å‘å™¨è¯­æ³•åŠå…³é”®å­—")]),s._v(" "),a("p",[s._v("ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š\nå½“å‘˜å·¥è¡¨ä¸­æ–°å¢ä¸€æ¡è®°å½•åï¼Œè‡ªåŠ¨æ‰“å°â€œæˆåŠŸæ’å…¥æ–°å‘˜å·¥â€")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("replace")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v(" insertStaffHint\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("after")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" xgj_test \n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for each row")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- local variables here")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n dbms_output"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("put_line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'æ–°å¢å‘˜å·¥æˆåŠŸ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" insertStaffHint"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("br"),s._v(" "),a("p",[s._v("è§¦å‘å™¨è¯­æ³•")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" trigger_name\n{BEFORE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AFTER")]),s._v(" }\n{"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v(" â€¦"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" {"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OF")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("column")]),s._v(" â€¦"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("table_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("view_name\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("REFERENCING {OLD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" old "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" NEW "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" new"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" PARENT "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" parent}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" condition"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nPL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("SQL_BLOCK "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CALL")]),s._v(" procedure_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"before-å’Œafter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#before-å’Œafter"}},[s._v("#")]),s._v(" BEFORE å’ŒAFTER")]),s._v(" "),a("p",[s._v("æŒ‡å‡ºè§¦å‘å™¨çš„è§¦å‘æ—¶åºåˆ†åˆ«ä¸ºå‰è§¦å‘å’Œåè§¦å‘æ–¹å¼ï¼Œå‰è§¦å‘æ˜¯åœ¨æ‰§è¡Œè§¦å‘äº‹ä»¶ä¹‹å‰è§¦å‘å½“å‰æ‰€åˆ›å»ºçš„è§¦å‘å™¨ï¼Œåè§¦å‘æ˜¯åœ¨æ‰§è¡Œè§¦å‘äº‹ä»¶ä¹‹åè§¦å‘å½“å‰æ‰€åˆ›å»ºçš„è§¦å‘å™¨ã€‚")]),s._v(" "),a("h4",{attrs:{id:"for-each-row"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-each-row"}},[s._v("#")]),s._v(" FOR EACH ROW")]),s._v(" "),a("p",[s._v("è¯´æ˜è§¦å‘å™¨ä¸ºè¡Œè§¦å‘å™¨ã€‚\nè¡Œè§¦å‘å™¨å’Œè¯­å¥è§¦å‘å™¨çš„åŒºåˆ«è¡¨ç°åœ¨ï¼šè¡Œè§¦å‘å™¨è¦æ±‚å½“ä¸€ä¸ªDMLè¯­å¥æ“èµ°å½±å“æ•°æ®åº“ä¸­çš„å¤šè¡Œæ•°æ®æ—¶ï¼Œå¯¹äºå…¶ä¸­çš„æ¯ä¸ªæ•°æ®è¡Œï¼Œåªè¦å®ƒä»¬ç¬¦åˆè§¦å‘çº¦æŸæ¡ä»¶ï¼Œå‡æ¿€æ´»ä¸€æ¬¡è§¦å‘å™¨ï¼›è€Œè¯­å¥è§¦å‘å™¨å°†æ•´ä¸ªè¯­å¥æ“ä½œä½œä¸ºè§¦å‘äº‹ä»¶ï¼Œå½“å®ƒç¬¦åˆçº¦æŸæ¡ä»¶æ—¶ï¼Œæ¿€æ´»ä¸€æ¬¡è§¦å‘å™¨ã€‚\nå½“çœç•¥FOR EACH ROW é€‰é¡¹æ—¶ï¼ŒBEFORE å’ŒAFTER è§¦å‘å™¨ä¸ºè¯­å¥è§¦å‘å™¨ï¼Œè€ŒINSTEAD OF è§¦å‘å™¨åˆ™åªèƒ½ä¸ºè¡Œè§¦å‘å™¨ã€‚")]),s._v(" "),a("h4",{attrs:{id:"referencing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#referencing"}},[s._v("#")]),s._v(" REFERENCING")]),s._v(" "),a("p",[s._v("REFERENCINGå­å¥è¯´æ˜ç›¸å…³åç§°ï¼Œåœ¨è¡Œè§¦å‘å™¨çš„PL/SQLå—å’ŒWHENå­å¥ä¸­å¯ä»¥ä½¿ç”¨ç›¸å…³åç§°å‚ç…§å½“å‰çš„æ–°ã€æ—§åˆ—å€¼ï¼Œé»˜è®¤çš„ç›¸å…³åç§°åˆ†åˆ«ä¸ºOLDå’ŒNEWã€‚è§¦å‘å™¨çš„PL/SQLå—ä¸­åº”ç”¨ç›¸å…³åç§°æ—¶ï¼Œå¿…é¡»åœ¨å®ƒä»¬ä¹‹å‰åŠ å†’å·(ğŸ˜ƒï¼Œä½†åœ¨WHENå­å¥ä¸­åˆ™ä¸èƒ½åŠ å†’å·ã€‚")]),s._v(" "),a("h4",{attrs:{id:"when"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#when"}},[s._v("#")]),s._v(" WHEN")]),s._v(" "),a("p",[s._v("WHENå­å¥è¯´æ˜è§¦å‘çº¦æŸæ¡ä»¶ã€‚Condition ä¸ºä¸€ä¸ªé€»è¾‘è¡¨è¾¾æ—¶ï¼Œå…¶ä¸­å¿…é¡»åŒ…å«ç›¸å…³åç§°ï¼Œè€Œä¸èƒ½åŒ…å«æŸ¥è¯¢è¯­å¥ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨PL/SQL å‡½æ•°ã€‚WHEN å­å¥æŒ‡å®šçš„è§¦å‘çº¦æŸæ¡ä»¶åªèƒ½ç”¨åœ¨BEFORE å’ŒAFTER è¡Œè§¦å‘å™¨ä¸­ï¼Œä¸èƒ½ç”¨åœ¨INSTEAD OF è¡Œè§¦å‘å™¨å’Œå…¶å®ƒç±»å‹çš„è§¦å‘å™¨ä¸­ã€‚")]),s._v(" "),a("p",[s._v("å½“ä¸€ä¸ªåŸºè¡¨è¢«ä¿®æ”¹( INSERT, UPDATE, DELETE)æ—¶è¦æ‰§è¡Œçš„å­˜å‚¨è¿‡ç¨‹ï¼Œæ‰§è¡Œæ—¶æ ¹æ®å…¶æ‰€ä¾é™„çš„åŸºè¡¨æ”¹åŠ¨è€Œè‡ªåŠ¨è§¦å‘ï¼Œå› æ­¤ä¸åº”ç”¨ç¨‹åºæ— å…³ï¼Œç”¨æ•°æ®åº“è§¦å‘å™¨å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚")]),s._v(" "),a("h3",{attrs:{id:"å®‰å…¨æ€§æ£€æŸ¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰å…¨æ€§æ£€æŸ¥"}},[s._v("#")]),s._v(" å®‰å…¨æ€§æ£€æŸ¥")]),s._v(" "),a("p",[s._v("ç¦æ­¢åœ¨éå·¥ä½œæ—¶é—´æ’å…¥æ•°æ®")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\néå·¥ä½œæ—¶é—´ï¼ˆæ˜Ÿçƒå…­ æ˜ŸæœŸæ—¥ï¼Œ é9ç‚¹~18ç‚¹çš„åŒºé—´ï¼‰\nç¦æ­¢å†™å…¥æ•°æ®\n \né¦–å…ˆè¦ææ¸…æ¥šï¼š è§¦å‘å™¨çš„ç±»å‹--è¯­å¥çº§è§¦å‘å™¨ã€‚\nä¸ç®¡æ’å…¥äº†å¤šå°‘æ¡æ•°æ®ï¼Œæ²¡æœ‰å¿…è¦å¯¹æ¯ä¸€è¡Œæ•°æ®éƒ½è¿›è¡Œæ ¡éªŒï¼Œåªè¦ä¸åœ¨è¿™ä¸ªæ—¶é—´æ®µå†…ï¼Œéƒ½ä¸è®©æ’å…¥ã€‚\n*/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("replace")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v(" addStafffCheck\n before "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" xgj_test \n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- local variables here")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n \n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" to_char"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'day'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'æ˜ŸæœŸå…­'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'æ˜ŸæœŸæ—¥'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v("\n to_number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("to_char"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sysdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hh24'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("between")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--ç¦æ­¢insert ")]),s._v("\n raise_application_error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'éå·¥ä½œæ—¶é—´ç¦æ­¢æ’å…¥æ•°æ®'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" addStafffCheck"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("raise_application_errorç”¨äºåœ¨plsqlä½¿ç”¨ç¨‹åºä¸­è‡ªå®šä¹‰ä¸æ­£ç¡®æ¶ˆæ¯ã€‚è¯¥å¼‚å¸¸åªåœ¨æ•°æ®åº“ç«¯çš„å­ç¨‹åºï¼ˆæµç¨‹ã€å‡½æ•°ã€åŒ…ã€è§¦å‘å™¨ï¼‰ä¸­è¿ç”¨ï¼Œè€Œæ— æ³•åœ¨åŒ¿åå—å’Œå®¢æˆ·ç«¯çš„å­ç¨‹åºä¸­è¿ç”¨ã€‚è¯­æ³•ä¸ºraise_application_error(error_number,message[,[truefalse]])ã€‚å…¶ä¸­error_numberç”¨äºå®šä¹‰ä¸æ­£ç¡®å·ï¼Œè¯¥ä¸æ­£ç¡®å·å¿…é¡»åœ¨-20000åˆ°-20999ä¹‹é—´çš„è´Ÿæ•´æ•°ï¼›messageç”¨äºæŒ‡å®šä¸æ­£ç¡®æ¶ˆæ¯ï¼Œå¹¶ä¸”è¯¥æ¶ˆæ¯çš„é•¿åº¦æ— æ³•è¶…è¿‡2048å­—èŠ‚ã€‚")]),s._v(" "),a("p",[s._v("è¿è¡Œç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"/blog/db/sql/oracle/trigger/trigger1.jpeg",alt:"trigger1"}})]),s._v(" "),a("h3",{attrs:{id:"æ•°æ®ç¡®è®¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®ç¡®è®¤"}},[s._v("#")]),s._v(" æ•°æ®ç¡®è®¤")]),s._v(" "),a("p",[s._v("æ¶¨è–ªåçš„å·¥èµ„åº”è¯¥å¤§äºæ¶¨è–ªå‰çš„å·¥èµ„")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\næ¶¨åçš„è–ªæ°´ä¸èƒ½ä½äºæ¶¨å‰çš„è–ªæ°´\n \n1 :old å’Œ :new ä»£è¡¨åŒä¸€æ¡è®°å½•\n2 :old ä»£è¡¨æ“ä½œè¯¥è¡Œä¹‹å‰ï¼Œè¿™ä¸€è¡Œçš„å€¼\n :new ä»£è¡¨æ“ä½œè¯¥è¡Œä¹‹åï¼Œè¿™ä¸€è¡Œçš„å€¼\n*/")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("replace")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v(" checkSalary\n before "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" xgj_test \n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for each row")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- local variables here æ²¡æœ‰å˜é‡å£°æ˜çš„è¯ï¼Œdeclareå¯ä»¥çœç•¥")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n \n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--- if æ¶¨åçš„è–ªæ°´ < æ¶¨å‰çš„è–ªæ°´ then å¦‚ä½•è¡¨ç¤ºå‘¢ ï¼Ÿ")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n \n raise_application_error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'æ¶¨åçš„è–ªæ°´:'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'å°äºæ¶¨å‰çš„è–ªæ°´ï¼š'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(":old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" checkSalary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("è¿è¡Œç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"/blog/db/sql/oracle/trigger/trigger2.jpeg",alt:"trigger2"}})]),s._v(" "),a("h3",{attrs:{id:"æ•°æ®åº“å®¡è®¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åº“å®¡è®¡"}},[s._v("#")]),s._v(" æ•°æ®åº“å®¡è®¡")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" xgj_record"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("info varchar2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("replace")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v(" addrecord\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("after")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" xgj_test \n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for each row")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("declare")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- local variables here")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n \n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("insert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("into")]),s._v(" xgj_record "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("values")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(":new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" addrecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("è¿è¡Œç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"/blog/db/sql/oracle/trigger/trigger3.jpeg",alt:"trigger3"}})]),s._v(" "),a("h3",{attrs:{id:"æ•°æ®çš„å¤‡ä»½å’ŒåŒæ­¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®çš„å¤‡ä»½å’ŒåŒæ­¥"}},[s._v("#")]),s._v(" æ•°æ®çš„å¤‡ä»½å’ŒåŒæ­¥")]),s._v(" "),a("p",[s._v("å½“ç»™å‘˜å·¥æ¶¨å®Œå·¥èµ„åï¼Œè‡ªåŠ¨å¤‡ä»½åˆ°å¤‡ä»½è¡¨ä¸­")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" xgj_test_bak "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("ã€€"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" xgj_test "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("or")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("replace")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v(" databack\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("after")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" xgj_test\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for each row")]),s._v(" \n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n \n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" xgj_test_bak "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" sal "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v(" databack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("è¿è¡Œç»“æœï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"/blog/db/sql/oracle/trigger/trigger4.jpeg",alt:"trigger4"}})]),s._v(" "),a("h3",{attrs:{id:"å…¶ä»–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–"}},[s._v("#")]),s._v(" å…¶ä»–")]),s._v(" "),a("h4",{attrs:{id:"å»ºç«‹ä¸€ä¸ªè§¦å‘å™¨-å½“èŒå·¥è¡¨-emp-è¡¨è¢«åˆ é™¤ä¸€æ¡è®°å½•æ—¶-æŠŠè¢«åˆ é™¤è®°å½•å†™åˆ°èŒå·¥è¡¨åˆ é™¤æ—¥å¿—è¡¨ä¸­å»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å»ºç«‹ä¸€ä¸ªè§¦å‘å™¨-å½“èŒå·¥è¡¨-emp-è¡¨è¢«åˆ é™¤ä¸€æ¡è®°å½•æ—¶-æŠŠè¢«åˆ é™¤è®°å½•å†™åˆ°èŒå·¥è¡¨åˆ é™¤æ—¥å¿—è¡¨ä¸­å»"}},[s._v("#")]),s._v(" å»ºç«‹ä¸€ä¸ªè§¦å‘å™¨, å½“èŒå·¥è¡¨ emp è¡¨è¢«åˆ é™¤ä¸€æ¡è®°å½•æ—¶ï¼ŒæŠŠè¢«åˆ é™¤è®°å½•å†™åˆ°èŒå·¥è¡¨åˆ é™¤æ—¥å¿—è¡¨ä¸­å»")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" emp_his "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" EMP "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" tr_del_emp\n BEFORE "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--æŒ‡å®šè§¦å‘æ—¶æœºä¸ºåˆ é™¤æ“ä½œå‰è§¦å‘")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" scott"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("emp\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--è¯´æ˜åˆ›å»ºçš„æ˜¯è¡Œçº§è§¦å‘å™¨")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--å°†ä¿®æ”¹å‰æ•°æ®æ’å…¥åˆ°æ—¥å¿—è®°å½•è¡¨ del_emp ,ä»¥ä¾›ç›‘ç£ä½¿ç”¨ã€‚")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" emp_his"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("deptno "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" empno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ename "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" job "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mgr "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sal "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" comm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" hiredate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("deptno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("empno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ename "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(":old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mgr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("comm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hiredate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" emp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" empno"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7788")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" emp_his"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" del_emp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h4",{attrs:{id:"é™å®šåªå¯¹éƒ¨é—¨å·ä¸º80çš„è®°å½•è¿›è¡Œè¡Œè§¦å‘å™¨æ“ä½œ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é™å®šåªå¯¹éƒ¨é—¨å·ä¸º80çš„è®°å½•è¿›è¡Œè¡Œè§¦å‘å™¨æ“ä½œ"}},[s._v("#")]),s._v(" é™å®šåªå¯¹éƒ¨é—¨å·ä¸º80çš„è®°å½•è¿›è¡Œè¡Œè§¦å‘å™¨æ“ä½œ")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" tr_emp_sal_comm\nBEFORE "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OF")]),s._v(" salary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" commission_pct\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" HR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("employees\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" UPDATING "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'salary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" :NEW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("salary "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("salary "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n \n  RAISE_APPLICATION_ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'éƒ¨é—¨80çš„äººå‘˜çš„å·¥èµ„ä¸èƒ½é™'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" UPDATING "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'commission_pct'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n \n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" :NEW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("commission_pct "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("commission_pct "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n  RAISE_APPLICATION_ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'éƒ¨é—¨80çš„äººå‘˜çš„å¥–é‡‘ä¸èƒ½é™'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHEN")]),s._v(" DELETING "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n  RAISE_APPLICATION_ERROR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20003")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ä¸èƒ½åˆ é™¤éƒ¨é—¨80çš„äººå‘˜è®°å½•'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CASE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("h4",{attrs:{id:"çº§è”æ›´æ–°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çº§è”æ›´æ–°"}},[s._v("#")]),s._v(" çº§è”æ›´æ–°")]),s._v(" "),a("p",[s._v("åœ¨ä¿®æ”¹äº†ä¸»è¡¨regionsä¸­çš„region_idä¹‹åï¼ˆAFTERï¼‰ï¼Œçº§è”çš„ã€è‡ªåŠ¨çš„æ›´æ–°å­è¡¨countriesè¡¨ä¸­åŸæ¥åœ¨è¯¥åœ°åŒºçš„å›½å®¶çš„region_idã€‚")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" tr_reg_cou\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AFTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OF")]),s._v(" region_id\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" regions\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n DBMS_OUTPUT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PUT_LINE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'æ—§çš„region_idå€¼æ˜¯'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(":old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("region_id\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ã€æ–°çš„region_idå€¼æ˜¯'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(":new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("region_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" countries "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" region_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :new"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("region_id\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" region_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("region_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"è§¦å‘å™¨ä¸­è°ƒç”¨è¿‡ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è§¦å‘å™¨ä¸­è°ƒç”¨è¿‡ç¨‹"}},[s._v("#")]),s._v(" è§¦å‘å™¨ä¸­è°ƒç”¨è¿‡ç¨‹")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" add_job_history\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" p_emp_id  job_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("employee_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_start_date job_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("start_date"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_end_date job_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("end_date"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_job_id  job_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_department_id job_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" job_history "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("employee_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" start_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" end_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    job_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" department_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("p_emp_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_start_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_end_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_job_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" p_department_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" add_job_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--åˆ›å»ºè§¦å‘å™¨è°ƒç”¨å­˜å‚¨è¿‡ç¨‹...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("OR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" update_job_history\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AFTER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OF")]),s._v(" job_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" department_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" employees\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n add_job_history"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(":old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("employee_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hire_date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sysdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n   :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("job_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" :old"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("department_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);